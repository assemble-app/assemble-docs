(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{108:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var i=n(0),r=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),p=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,b=u["".concat(o,".").concat(m)]||u[m]||d[m]||a;return n?r.a.createElement(b,l(l({ref:t},c),{},{components:n})):r.a.createElement(b,l({ref:t},c))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},98:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var i=n(3),r=n(7),a=(n(0),n(108)),o={id:"infinite_dom",title:"Infinte DOM with finite state"},l={unversionedId:"infinite_dom",id:"infinite_dom",isDocsHomePage:!1,title:"Infinte DOM with finite state",description:"Your view's state is limited to a certain amount of memory when serialized. When building things like a chat app, often you wan't the past history of events to be saved without having to keep them in memory.",source:"@site/docs/infinite_dom.md",slug:"/infinite_dom",permalink:"/docs/infinite_dom",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/infinite_dom.md",version:"current",sidebar:"someSidebar",previous:{title:"Dashboards by embeding views",permalink:"/docs/dashboards"},next:{title:"Remote Procedure Calls (RPC)",permalink:"/docs/rpc"}},s=[{value:"Putting it all together",id:"putting-it-all-together",children:[]},{value:"More info",id:"more-info",children:[]}],c={toc:s};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Your view's state is limited to a certain amount of memory when serialized. When building things like a chat app, often you wan't the past history of events to be saved without having to keep them in memory."),Object(a.b)("p",null,"Typically, Live HTML will replace divs in a when the list changes. Utilizing the ",Object(a.b)("inlineCode",{parentName:"p"},"assemble-update")," binding we can instead append or prepend the div. You ",Object(a.b)("em",{parentName:"p"},"must")," set a unique ID on the parent element and for each child element"),Object(a.b)("h3",{id:"putting-it-all-together"},"Putting it all together"),Object(a.b)("p",null,"The below example will keep all events in view even though one event is kept in memory. Because after each event the ID is unique, Live HTML will prepend the container to the list."),Object(a.b)("p",null,Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"https://www.assemble.app/environment/3fbabc8b-109c-4568-a232-e9ed5240c7b0/quick_view/"}),"Quick view")," for details and to fork. "),Object(a.b)("iframe",{height:"400",width:"100%",src:"https://www.assemble.app/environment/3fbabc8b-109c-4568-a232-e9ed5240c7b0/view/?iframe=true",title:"Infinite DOM"}),Object(a.b)("pre",null,Object(a.b)("code",Object(i.a)({parentName:"pre"},{className:"language-rust"}),'extern crate assemble_app;\nextern crate serde;\nextern crate maud;\nuse assemble_app::*;\nuse maud::html;\nuse serde::{Deserialize, Serialize};\nuse std::collections::{HashMap};\n\nassemble_init! {{\n    register_root_view!(ViewHandler);\n}}\n\n\n#[derive(Deserialize, Serialize)]\nstruct ViewHandler {\n    id: String,\n    chosen_animal: String,\n}\n\n\n#[derive(Deserialize, Serialize)]\nstruct MyClickEvent {\n    animal: String,\n}\n\n\nimpl View for ViewHandler {\n  fn start(_is_connected: bool, _params: HashMap<String, String>) -> Result<Self> {\n    Ok(ViewHandler {id: "initial".into(), chosen_animal: "\u2753".into()}).into()\n  }\n\n  fn render(&self) -> Result<Html> {\n    let markup = html! {\n        div class="bg-indigo-700" {\n          div class="max-w-2xl mx-auto text-center py-16 px-8" {\n            div id="clicks" assemble-update="prepend" {\n              h2#(self.id) class="cursor-pointer mt-4 text-xl font-extrabold text-white" {\n                "You clicked: " (self.chosen_animal)\n              }\n            }\n\n            a href="#" assemble-click="i-was-clicked" assemble-value-animal="\ud83d\udc15" class="cursor-pointer mt-4 mx-6 text-2xl font-extrabold text-white" {\n              "\ud83d\udc15"\n            }\n            a href="#" assemble-click="i-was-clicked" assemble-value-animal="\ud83d\udc08" class="cursor-pointer mt-4 mx-6 text-2xl font-extrabold text-white" {\n              "\ud83d\udc08"\n            }\n          }\n\n        }\n    };\n    Ok(markup.into_string())\n  }\n  \n  \n  fn local_event(&mut self, msg: &str, payload: &[u8]) -> Result<()> {\n      match msg {\n        "i-was-clicked" => {\n          let id = random_string(10)?;\n          let ev: MyClickEvent = deserialize(payload)?;\n          self.chosen_animal = ev.animal;\n          self.id = id;\n          Ok(())\n        }\n        _ => Ok(())\n      }\n  }\n    \n}\n')),Object(a.b)("h3",{id:"more-info"},"More info"),Object(a.b)("p",null,"Refer to the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"https://hexdocs.pm/phoenix_live_view/dom-patching.html"}),"LiveView docs")," for more information about the binding."))}p.isMDXComponent=!0}}]);