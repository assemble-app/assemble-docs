(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{101:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(3),a=n(7),o=(n(0),n(108)),c=n(111),i={id:"rpc",title:"Remote Procedure Calls (RPC)"},s={unversionedId:"rpc",id:"rpc",isDocsHomePage:!1,title:"Remote Procedure Calls (RPC)",description:"Often times you will want to access your environment programatically without having to deal with a UI. Assemble integrates well into almost any workflow as it exposes RPC endpoints for you to take advantage of. RPC calls always take an optional argument (which is the decoded body of the request).",source:"@site/docs/rpc.md",slug:"/rpc",permalink:"/docs/rpc",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/rpc.md",version:"current",sidebar:"someSidebar",previous:{title:"Infinte DOM with finite state",permalink:"/docs/infinite_dom"},next:{title:"Limits",permalink:"/docs/limits"}},l=[{value:"Accessing via REST",id:"accessing-via-rest",children:[]}],u={toc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Often times you will want to access your environment programatically without having to deal with a UI. Assemble integrates well into almost any workflow as it exposes RPC endpoints for you to take advantage of. RPC calls always take an optional argument (which is the decoded body of the request)."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-rust"}),'assemble_init! {{\n  register_call!(my_rpc_call, my_rpc_call);\n}}\n\n#[derive(Deserialize, Serialize)]\nstruct MyEvent {\n  x: String,\n  y: String,\n}\n\nfn my_rpc_call(t: Option<MyEvent>) -> Result<Box<()>> {\n    let ev = t.expect("Expected input");\n    pubsub_publish_from("some-topic", "some-event", &ev)?;\n    kv_set("my-bucket", &utc_now()?.to_rfc3339(), &ev)?;\n    Ok(Box::new(()))\n}\n')),Object(o.b)("p",null,"You can then call the endpoint using any REST client."),Object(o.b)("h2",{id:"accessing-via-rest"},"Accessing via REST"),Object(o.b)("p",null,"First you will need an ",Object(o.b)("a",{href:Object(c.a)("docs/local_development#1-get-an-api-key")},"API Key"),"."),Object(o.b)("p",null,"After that locate your environment ID on your dashboard:"),Object(o.b)("img",{alt:"Environment id",src:Object(c.a)("img/screenshots/environment-id.png")}),Object(o.b)("p",null,"Now you can call the JSON endpoint."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),'curl \\\n-H "Accept: application/json" \\\n-H \'Authorization: Bearer [API key]\' \\\n-H "Content-Type: application/json" \\\n--data \'{"x": "xxx", "y": "yyy"}\' \\\nhttps://www.assemble.app/environment/[Your Environment ID]/rpc/my_rpc_call\n')),Object(o.b)("p",null,"You can also call the endpoint with MsgPack using the ",Object(o.b)("inlineCode",{parentName:"p"},"application/x-msgpack"),". If you are using the API in python or another programming language MsgPack is preferred as there is no exta conversion so it is faster and more accurate. You can also transmit binary data via MsgPack."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-python"}),"API_KEY = '[YOUR API KEY]'\nENVIRONMENT_ID = '[Your Environment ID]'\n\nr = requests.post(\n    f'https://www.assemble.app/environment/{ENVIRONMENT_ID}/rpc/my_rpc_call',\n    headers={'Authorization': f'Bearer {API_KEY}', 'Accept': 'application/x-msgpack', 'Content-Type': 'application/x-msgpack'},\n    data=msgpack.packb({\"x\": \"xxx\", \"y\": \"yyy\"}, use_bin_type=True)\n)\nmsgpack.unpackb(r.content)\n")))}p.isMDXComponent=!0},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,d=p["".concat(c,".").concat(m)]||p[m]||b[m]||o;return n?a.a.createElement(d,i(i({ref:t},l),{},{components:n})):a.a.createElement(d,i({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var l=2;l<o;l++)c[l]=n[l];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},111:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(21),a=n(113);function o(){const{siteConfig:{baseUrl:e="/",url:t}={}}=Object(r.default)();return{withBaseUrl:(n,r)=>function(e,t,n,{forcePrependBaseUrl:r=!1,absolute:o=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if(Object(a.b)(n))return n;if(r)return t+n;const c=n.startsWith(t)?n:t+n.replace(/^\//,"");return o?e+c:c}(t,e,n,r)}}function c(e,t={}){const{withBaseUrl:n}=o();return n(e,t)}},113:function(e,t,n){"use strict";function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!r(e)}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}))}}]);