<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Assemble Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Assemble Blog Atom Feed"><title data-react-helmet="true">Interacting with the database | Assemble</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Interacting with the database | Assemble"><meta data-react-helmet="true" name="description" content="Eventually you will want to persist data to stay around after you close your browser tab. Every Assemble environment comes with a database that you can use to store data."><meta data-react-helmet="true" property="og:description" content="Eventually you will want to persist data to stay around after you close your browser tab. Every Assemble environment comes with a database that you can use to store data."><meta data-react-helmet="true" property="og:url" content="https://docs.assemble.app/docs/database"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.assemble.app/docs/database"><link rel="stylesheet" href="/styles.03da571f.css">
<link rel="preload" href="/styles.e8d36613.js" as="script">
<link rel="preload" href="/runtime~main.5405fb18.js" as="script">
<link rel="preload" href="/main.52332641.js" as="script">
<link rel="preload" href="/1.7e9f87a3.js" as="script">
<link rel="preload" href="/39.4114f076.js" as="script">
<link rel="preload" href="/40.84375579.js" as="script">
<link rel="preload" href="/935f2afb.529b03d7.js" as="script">
<link rel="preload" href="/38.bf62c240.js" as="script">
<link rel="preload" href="/b48a11ff.f2ee109d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Assemble" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="Assemble" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Assemble (preview)</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Assemble" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="Assemble" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Assemble (preview)</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Book</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">What is Assemble?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/local_development">Local development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hello_world">Hello world</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dom_events">DOM events and stateful content</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment_events">Environment events</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/database">Interacting with the database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async_callbacks">Async callbacks and timouts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/presence">Presence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dashboards">Dashboards by embeding views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/infinite_dom">Infinte DOM with finite state</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rpc">Remote Procedure Calls (RPC)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Limits and features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/limits">Limits</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Interacting with the database</h1></header><div class="markdown"><p>Eventually you will want to persist data to stay around after you close your browser tab. Every Assemble environment comes with a database that you can use to store data.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="putting-data-in"></a>Putting data in<a class="hash-link" href="#putting-data-in" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-rust codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Deserialize, Serialize)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct MyData {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    some_param: String,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    other_param: u32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kv_set(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;my-bucket&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;my-item-key&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &amp;MyData{some_param: &quot;Hello world&quot;.into(), other_param: 0}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)?;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getting-data-out"></a>Getting data out<a class="hash-link" href="#getting-data-out" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-rust codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">let data: Option&lt;MyData&gt; = kv_get(&quot;my-bucket&quot;, &quot;my-item-key&quot;)?;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="patching-data"></a>Patching data<a class="hash-link" href="#patching-data" title="Direct link to heading">#</a></h2><p>Sometimes you only want to update one field without having to read the whole object, change the field and write the whole object back. Patching objects allow you to do this by creating a struct with only the fields you want to change.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-rust codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Deserialize, Serialize)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct MyDataPatch {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    other_param: u32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kv_patch(&quot;my-bucket&quot;, &quot;my-item-key&quot;, &amp;MyDataPatch{other_param: 0})?;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="scanning-data"></a>Scanning data<a class="hash-link" href="#scanning-data" title="Direct link to heading">#</a></h2><p>When you want to read the objects by the order of the keys, use the scan functionality. This is useful for displaying lists and building indexes.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-rust codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">let scan_opts = ScanOpts::default().reverse(true).limit(LIMIT);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">let items = kv_scan::&lt;MyData&gt;(&quot;my-bucket&quot;, &amp;scan_opts)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (key, item) in items {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // do something</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="counters"></a>Counters<a class="hash-link" href="#counters" title="Direct link to heading">#</a></h2><p>Sometimes you want to simply keep count of things. For this, reading a key, updating it and writing it back out is not desirable. Assemble supplies the counter type to accomodate this.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-rust codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">counter_increment(&quot;my-bucket&quot;, &quot;my-counter&quot;, 1)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">let current_count = counter_get(&quot;my-bucket&quot;, &quot;my-counter&quot;)?</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="putting-it-all-together"></a>Putting it all together<a class="hash-link" href="#putting-it-all-together" title="Direct link to heading">#</a></h2><p>Lets continue building our example from the previous section by storing events in the database after every click and when the View starts, scanning the database and loading the most recent ones.</p><iframe height="400" width="100%" src="https://www.assemble.app/environment/8bd8ffc6-85cd-4466-8320-5cd56d94b1aa/view/?iframe=true" title="Database"></iframe><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-rust codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">extern crate assemble_app;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">extern crate serde;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">extern crate maud;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use assemble_app::*;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use maud::html;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use serde::{Deserialize, Serialize};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">use std::collections::{HashMap, VecDeque};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">assemble_init! {{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    register_root_view!(ViewHandler);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Deserialize, Serialize)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct MyEvent {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    description: String,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    face: String,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#[derive(Deserialize, Serialize)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct ViewHandler {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  recent_events: VecDeque&lt;MyEvent&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const LIMIT: u32 = 10;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">impl View for ViewHandler {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fn start(_is_connected: bool, _params: HashMap&lt;String, String&gt;) -&gt; Result&lt;Self&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pubsub_subscribe(&quot;events&quot;)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    let mut vd = VecDeque::new();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    let events = kv_scan::&lt;MyEvent&gt;(&quot;event_bucket&quot;, &amp;ScanOpts::default().reverse(true).limit(LIMIT))?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (_, event) in events {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        vd.push_front(event);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Ok(ViewHandler { recent_events: vd })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fn render(&amp;self) -&gt; Result&lt;Html&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    let markup = html! {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        div class=&quot;bg-indigo-700&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          div class=&quot;max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            button assemble-click=&quot;click&quot; assemble-value-description=&quot;Panda&quot;  assemble-value-face=&quot;üêº&quot; class=&quot;mt-8 w-full inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 sm:w-auto&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;Pick panda (üêº)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            button assemble-click=&quot;click&quot; assemble-value-description=&quot;Gorilla&quot;  assemble-value-face=&quot;ü¶ç&quot; class=&quot;mx-4 mt-8 w-full inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 sm:w-auto&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;Pick gorilla (ü¶ç)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            button assemble-click=&quot;click&quot; assemble-value-description=&quot;Tiger&quot;  assemble-value-face=&quot;üêØ&quot; class=&quot;mt-8 w-full inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 sm:w-auto&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              &quot;Pick tiger (üêØ)&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            h2 class=&quot;mt-4 text-3xl font-extrabold text-white sm:text-4xl&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              span class=&quot;block&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;Last 100 Events&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            @for (event) in &amp;self.recent_events {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              p class=&quot;mt-4 text-lg leading-6 text-indigo-200&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;Somebody picked a &quot; (event.description) &quot; &quot; (event.face)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Ok(markup.into_string())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fn local_event(&amp;mut self, msg: &amp;str, payload: &amp;[u8]) -&gt; Result&lt;()&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    match msg {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;click&quot; =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        let ev: MyEvent = deserialize(payload)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        kv_set(&quot;event_bucket&quot;, &amp;utc_now()?.to_rfc3339(), &amp;ev)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        pubsub_publish_from(&quot;events&quot;, &quot;new_event&quot;, &amp;ev)?;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        self.recent_events.push_front(ev);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        self.recent_events.truncate(LIMIT as usize);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ok(())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      _ =&gt; Ok(())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  fn pubsub_event(&amp;mut self, topic: &amp;str, event: &amp;str, payload: &amp;[u8]) -&gt; Result&lt;()&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    match &amp;(topic, event) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (&quot;events&quot;, &quot;new_event&quot;) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        self.recent_events.push_front(deserialize(payload)?);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        self.recent_events.truncate(LIMIT as usize);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ok(())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      _ =&gt; Ok(())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/database.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/environment_events"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Environment events</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/async_callbacks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Async callbacks and timouts ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#putting-data-in" class="table-of-contents__link">Putting data in</a></li><li><a href="#getting-data-out" class="table-of-contents__link">Getting data out</a></li><li><a href="#patching-data" class="table-of-contents__link">Patching data</a></li><li><a href="#scanning-data" class="table-of-contents__link">Scanning data</a></li><li><a href="#counters" class="table-of-contents__link">Counters</a></li><li><a href="#putting-it-all-together" class="table-of-contents__link">Putting it all together</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2020 Southern California Software Labs, LLC.</div></div></div></footer></div>
<script src="/styles.e8d36613.js"></script>
<script src="/runtime~main.5405fb18.js"></script>
<script src="/main.52332641.js"></script>
<script src="/1.7e9f87a3.js"></script>
<script src="/39.4114f076.js"></script>
<script src="/40.84375579.js"></script>
<script src="/935f2afb.529b03d7.js"></script>
<script src="/38.bf62c240.js"></script>
<script src="/b48a11ff.f2ee109d.js"></script>
</body>
</html>